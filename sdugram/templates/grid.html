{% load static %}
{% block index %}

<section>
    <h1 style="text-align:center;">Main categories</h1>
    <ul>
        <li class="li_choose">Services </li>
        <li class="li_choose">Real estate </li>
        <li class="li_choose">Electronics</li>
        <li class="li_choose">House and garden</li>
        <li class="li_choose">Job</li>
        <li class="li_choose">Fashion & Style</li>
        <li class="li_choose">Child's world</li>
        <li class="li_choose">Hobbies, recreation and sports </li>
        <li class="li_choose">Transport</li>
        <li class="li_choose">Animals</li>
        <li class="li_choose">Giveaways</li>
    </ul>
    <div class="container container_grid">
        {% if searched %}
            <h1 style="text-align:center;">Search: {{ searched }}</h1>
        {% else %}
            <h1 style="text-align:center;">Advertisements</h1>
        {% endif %}
        <div class="row" style="text-align: center; align-content: center; justify-content: center;">

            {% for a in table %}

            <div class="card col-md-3 m-1 card_c">
                <img src="{{ a.img }}" class="card-img-top" style="width: 16rem; height: 15rem">
                <div class="card-body">
                    <h6 class="card-title">{{ a.alt }}</h6>
                    <p class="card-text"></p>
                    <p class="card-text">KAZAKHSTAN</p>

                    <a href="#" class="btn btn-primary">Show details</a>


                </div>
            </div>
            {% endfor %}
        </div>
        {% if advt_list %}
        <div class="row" style="text-align: center; align-content: center; justify-content: center;">
            {% for a in page_obj %}
                <div class="card col-md-3 m-1 card_c">
                    <img src="{{ a.advt_img.url  }}" class="card-img-top" style="width: 16rem; height: 15rem">
                    <div class="card-body">
                        <h6 class="card-title">{{ a.advt_name }}</h6>
                        <p class="card-text">{{ a.advt_price }} KZT</p>
                        <p class="card-text">{{ a.advt_location }}, KAZAKHSTAN</p>



                        <form method="POST"  action="{% url 'add_fav' a.pk %}">
                             {% csrf_token %}

                             <button name='favbtn'>add to favorites</button>
                        </form>
                    <a href="#" class="btn btn-primary">Show details</a>
                    </div>
                </div>
            {% endfor %}
        </div>
        {% else %}
            <h1>Не найдено</h1>
        {% endif %}

    </div>
    {% if page_obj.has_other_pages %}
    <nav class="list-pages">
        <ul>
            {% if page_obj.has_previous %}
            <li class="page-num">
                <a href="?page={{ page_obj.previous_page_number }}"> &lt;</a>
            </li>
            {% endif  %}
            {% for p in page_obj.paginator.page_range %}
            {% if page_obj.number == p %}
            <li class="page-num page-num-selected"> {{ p }}</li>
            {% elif p >= page_obj.number|add:-2 and p <= page_obj.number|add:2  %}
            <li class="page-num">
               <p><a href="?page={{ p }}">{{ p }}</a></p>
            </li>
            {% endif %}
            {% endfor %}
            {% if page_obj.has_next %}
            <li class="page-num">
                <a href="?page={{ page_obj.next_page_number }}"> &gt;</a>
            </li>
            {% endif  %}
        </ul>
    </nav>
    {% endif %}
</section>

{% endblock %}